---
import Layout from "../layouts/Layout.astro";

const response = await fetch("https://api.linear.app/graphql", {
  method: "POST",
  headers: {
    "Content-Type": "application/json",
    Authorization: `Bearer ${import.meta.env.KEY}`,
  },
  body: JSON.stringify({
    query: `
			query getIssues {
				issues(
					first: 100
					filter: {
						team: { name: { eq: "Landscape + Apps" } }
						state: { name: { in: ["Todo", "In Progress", "In Review"] }}
					}
				){
					nodes {
						id
						title
					}
				}
			}
		`,
  }),
});

const { data } = await response.json();

// console.log(data);
---

<Layout title="Landscape Dev Status">
  <main>
    <h1>Landscape Dev Status</h1>
    {data.issues.nodes.map((i: any) => (
			<p>{i.title}</p>
		))}
  </main>
</Layout>
